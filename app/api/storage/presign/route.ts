import { NextRequest, NextResponse } from 'next/server'; import { presignPutUrl } from '@/lib/storage/r2'; export async function POST(req:NextRequest){ try{ const {key,contentType}=await req.json(); if(!key||!contentType) return NextResponse.json({error:'key and contentType required'},{status:400}); const {url}=await presignPutUrl(key,contentType); return NextResponse.json({url}); }catch(e:any){ return NextResponse.json({error:e?.message||'failed'}, {status:500}); } }
